<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <title>–î–µ—Ç–∞–π–ª–∏ –∑–∞ –∏–º–æ—Ç–∞ | EliteEstate.bg</title>
    <link rel="stylesheet" href="../CSS/styles.css">
    
    <style>
        /* --- –°–¢–ò–õ–û–í–ï –ó–ê –ì–ê–õ–ï–†–ò–Ø–¢–ê --- */
        .details-container {
            max-width: 1100px;
            margin: 40px auto;
            padding: 20px;
            display: flex;
            gap: 40px;
        }

        /* –õ—è–≤–∞ –∫–æ–ª–æ–Ω–∞ - –ì–∞–ª–µ—Ä–∏—è */
        .details-gallery {
            flex: 3;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .main-image-container {
            width: 100%;
            height: 450px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 1px solid #eee;
        }

        .main-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s ease;
        }

        .thumbnails-row {
            display: flex;
            gap: 15px;
            justify-content: flex-start;
        }

        .thumb {
            width: 100px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            opacity: 0.6;
            transition: 0.3s;
            border: 2px solid transparent;
        }

        .thumb:hover, .thumb.active {
            opacity: 1;
            transform: scale(1.05);
            border-color: #c00000;
        }

        /* –î—è—Å–Ω–∞ –∫–æ–ª–æ–Ω–∞ - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */
        .details-info {
            flex: 2;
            background: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            height: fit-content;
        }

        .details-info h1 { font-size: 32px; margin-bottom: 10px; color: #333; }
        .details-location { color: #666; font-size: 18px; margin-bottom: 20px; }
        .details-price { font-size: 36px; color: #c00000; font-weight: 800; margin-bottom: 20px; display: block; }
        
        .prop-features {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            border-bottom: 1px solid #eee;
            padding-bottom: 20px;
        }
        
        .feature {
            background: #f4f4f4;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            color: #555;
        }

        .btn-contact {
            width: 100%;
            background: #c00000;
            color: white;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }
        .btn-contact:hover { background: #900000; }

        @media (max-width: 768px) {
            .details-container { flex-direction: column; }
            .main-image-container { height: 300px; }
        }
    </style>
</head>
<body>

<header class="header">
    <div class="logo"><a href="../index.html" class="logo-link">EliteEstate.bg</a></div>
    <nav class="nav-menu">
        <ul>
            <li><a href="../index.html">–ù–∞—á–∞–ª–æ</a></li>
            <li><a href="client-profile.html">–ö–ª–∏–µ–Ω—Ç</a></li>
        </ul>
    </nav>
</header>

<div class="details-container">
    
    <div class="details-gallery">
        <div class="main-image-container">
            <img id="mainImg" src="" alt="–ò–º–æ—Ç" class="main-image" onerror="this.src='../Images/house.png'">
        </div>

        <div class="thumbnails-row" id="thumbsContainer">
            </div>
    </div>

    <div class="details-info">
        <h1 id="propTitle">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...</h1>
        <p class="details-location">üìç <span id="propLocation">...</span></p>
        
        <div class="prop-features">
            <span class="feature" id="propType">...</span>
            <span class="feature">120 m¬≤</span> <span class="feature">–ï—Ç–∞–∂ 3/5</span>
        </div>

        <span id="propPrice" class="details-price">... ‚Ç¨</span>

        <div style="margin-bottom: 30px; line-height: 1.6; color: #555;">
            <h3>–û–ø–∏—Å–∞–Ω–∏–µ</h3>
            <p>–ü—Ä–µ–¥—Å—Ç–∞–≤—è–º–µ –≤–∏ —Ç–æ–∑–∏ –∏–∑–∫–ª—é—á–∏—Ç–µ–ª–µ–Ω –∏–º–æ—Ç, —Ä–∞–∑–ø–æ–ª–æ–∂–µ–Ω –≤ –∫–æ–º—É–Ω–∏–∫–∞—Ç–∏–≤–µ–Ω —Ä–∞–π–æ–Ω. –ñ–∏–ª–∏—â–µ—Ç–æ —Ä–∞–∑–ø–æ–ª–∞–≥–∞ —Å –ø—Ä–æ—Å—Ç–æ—Ä–Ω–∏ —Å—Ç–∞–∏, –º–æ–¥–µ—Ä–Ω–æ –æ–±–∑–∞–≤–µ–∂–¥–∞–Ω–µ –∏ –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞ –≥–ª–µ–¥–∫–∞. –ò–¥–µ–∞–ª–Ω–æ –µ –∫–∞–∫—Ç–æ –∑–∞ –∂–∏–≤–µ–µ–Ω–µ, —Ç–∞–∫–∞ –∏ –∑–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è.</p>
        </div>

        <button class="btn-contact">üìû –°–≤—ä—Ä–∂–∏ —Å–µ —Å –±—Ä–æ–∫–µ—Ä</button>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // 1. –í–∑–∏–º–∞–º–µ –¥–∞–Ω–Ω–∏—Ç–µ –æ—Ç URL –∞–¥—Ä–µ—Å–∞
        const params = new URLSearchParams(window.location.search);
        
        const title = params.get('title') || "–ò–º–æ—Ç";
        const location = params.get('location') || "–ë—ä–ª–≥–∞—Ä–∏—è";
        const price = params.get('price') || "–ü–æ –¥–æ–≥–æ–≤–∞—Ä—è–Ω–µ";
        const type = params.get('type') || "–ò–º–æ—Ç";
        
        // –ü—ä—Ç –∫—ä–º –≥–ª–∞–≤–Ω–∞—Ç–∞ —Å–Ω–∏–º–∫–∞
        let mainImgPath = params.get('img') ? "../" + params.get('img') : "../Images/house.png";

        // 2. –ü–æ–ø—ä–ª–≤–∞–º–µ —Ç–µ–∫—Å—Ç–æ–≤–µ—Ç–µ
        document.title = `${title} | EliteEstate.bg`;
        document.getElementById('propTitle').textContent = title;
        document.getElementById('propLocation').textContent = location;
        document.getElementById('propPrice').textContent = price;
        document.getElementById('propType').textContent = type;
        
        // 3. –ù–∞—Å—Ç—Ä–æ–π–≤–∞–º–µ –≥–ª–∞–≤–Ω–∞—Ç–∞ —Å–Ω–∏–º–∫–∞
        const mainImgEl = document.getElementById('mainImg');
        mainImgEl.src = mainImgPath;
        
        // –î–æ–±–∞–≤—è–º–µ –∑–∞—â–∏—Ç–∞ –∏ –∑–∞ –≥–ª–∞–≤–Ω–∞—Ç–∞ —Å–Ω–∏–º–∫–∞
        mainImgEl.onerror = function() {
            this.src = '../Images/house.png';
        };

        // 4. –ì–ï–ù–ï–†–ò–†–ê–ù–ï –ù–ê –ì–ê–õ–ï–†–ò–Ø–¢–ê
        // –û–ø–∏—Ç–≤–∞–º–µ —Å–µ –¥–∞ –∏–∑–≤–∞–¥–∏–º –Ω–æ–º–µ—Ä–∞ –Ω–∞ —Å–Ω–∏–º–∫–∞—Ç–∞
        const match = mainImgPath.match(/p(\d+)\.jpg/i); // 'i' –ø—Ä–∞–≤–∏ —Ç—ä—Ä—Å–µ–Ω–µ—Ç–æ –Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–Ω–æ –∫—ä–º –º–∞–ª–∫–∏/–≥–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏
        
        if (match) {
            let currentId = parseInt(match[1]); 
            const thumbsContainer = document.getElementById('thumbsContainer');
            thumbsContainer.innerHTML = ""; // –ò–∑—á–∏—Å—Ç–≤–∞–º–µ —Å—Ç–∞—Ä–∏—Ç–µ, –∞–∫–æ –∏–º–∞

            // –°—ä–∑–¥–∞–≤–∞–º–µ 3 –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ —Å–Ω–∏–º–∫–∏
            for (let i = 1; i <= 3; i++) {
                let nextId = currentId + i; 
                // –ê–∫–æ —Å—Ç–∏–≥–Ω–µ–º –∫—Ä–∞—è (35), –∑–∞–ø–æ—á–≤–∞–º–µ –æ—Ç–Ω–∞—á–∞–ª–æ
                if (nextId > 35) nextId = nextId - 35; 

                let thumbPath = `../Images/Properties/p${nextId}.jpg`;

                const img = document.createElement('img');
                img.src = thumbPath;
                img.className = 'thumb';
                
                // --- –¢–û–í–ê –ï –ü–û–ü–†–ê–í–ö–ê–¢–ê ---
                // –ê–∫–æ —Å–Ω–∏–º–∫–∞—Ç–∞ –ª–∏–ø—Å–≤–∞ (–≥—Ä–µ—à–Ω–æ –∏–º–µ –∏–ª–∏ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ), —Å–ª–æ–∂–∏ —Ä–µ–∑–µ—Ä–≤–Ω–∞
                img.onerror = function() {
                    this.src = '../Images/house.png'; 
                };
                // --------------------------

                img.onclick = function() {
                    mainImgEl.style.opacity = 0;
                    setTimeout(() => {
                        mainImgEl.src = this.src;
                        mainImgEl.style.opacity = 1;
                    }, 200);
                    
                    document.querySelectorAll('.thumb').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                };

                thumbsContainer.appendChild(img);
            }
        } else {
            // –ê–∫–æ —Å–Ω–∏–º–∫–∞—Ç–∞ –Ω–µ –µ –æ—Ç —Å–µ—Ä–∏—è—Ç–∞ p1-p35 (–Ω–∞–ø—Ä. –µ house.png), —Å–∫—Ä–∏–≤–∞–º–µ –≥–∞–ª–µ—Ä–∏—è—Ç–∞
            document.getElementById('thumbsContainer').style.display = 'none';
        }
    });
</script>

</body>
</html>